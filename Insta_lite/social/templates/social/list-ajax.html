{% load static %}

{% for post in posts %}

    <div class="card mb-4 shadow-sm">

        <div class="card-body">

            <!-- Ø¹Ù†ÙˆØ§Ù† Ù¾Ø³Øª -->
            <h4>
                <a href="{% url 'social:post_detail' post.id %}">
                    {{ post.title }}
                </a>
            </h4>

            <!-- Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ + ØªØ§Ø±ÛŒØ® -->
            <p class="text-muted small mb-2">
                Ù†ÙˆØ´ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· 
                <strong>
                    <a href="{% url 'social:user_detail' post.author.username %}">
                        {{ post.author.username }}
                    </a>
                </strong>
                Ø¯Ø± {{ post.created|date:"Y/m/d H:i" }}
            </p>

            <!-- Ø®Ù„Ø§ØµÙ‡ Ù…ØªÙ† -->
            <p>{{ post.content|truncatewords:30 }}</p>

            <!-- ØªÚ¯â€ŒÙ‡Ø§ -->
            {% if post.tags.all %}
                <p class="mb-1">
                    {% for tag in post.tags.all %}
                        <a href="{% url 'social:post-list-by-tag' tag.slug %}" 
                           class="badge bg-secondary text-light mx-1">
                            #{{ tag.name }}
                        </a>
                    {% endfor %}
                </p>
            {% endif %}

            <hr>

            <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ø§ÛŒÚ© Ùˆ Ø°Ø®ÛŒØ±Ù‡ (AJAX-ready) -->
            <div class="d-flex justify-content-between">

                <button class="btn btn-sm btn-outline-primary like-btn"
                        data-post-id="{{ post.id }}">
                    ğŸ‘ Ù„Ø§ÛŒÚ© ({{ post.likes.count }})
                </button>

                <button class="btn btn-sm btn-outline-success save-btn"
                        data-post-id="{{ post.id }}">
                    ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡
                </button>

            </div>

        </div>
    </div>

{% empty %}
    <p class="text-muted text-center">Ù¾Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª.</p>
{% endfor %}
