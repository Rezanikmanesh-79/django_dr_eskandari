{% extends 'parent/base.html' %}
{% block title %}New Post{% endblock %}

{% block content %}
<div class="main-container">
    <div class="hero-section">
        <h1 class="hero-title">ایجاد یا ویرایش پست</h1>
        <p class="hero-subtitle">فرم زیر را پر کنید تا پست جدید ایجاد شود یا پست موجود ویرایش شود.</p>
    </div>

    <form method="post" enctype="multipart/form-data" class="blog-post">
        {% csrf_token %}
        {{ form.as_p }}

        <!-- Image 1 -->
        <div class="form-group">
            <label for="{{ form.image1.id_for_label }}">تصویر 1:</label>
            {{ form.image1 }}
            {% if is_edit and post.images.all.0 %}
                <div class="mt-2">
                    <p>تصویر فعلی:</p>
                    <img src="{{ post.images.all.0.image_file.url }}" alt="تصویر فعلی 1" style="max-width: 200px;">
                    <a href="{% url 'blog:delete-image' post.images.all.0.id %}" class="cta-button" style="background: transparent; border: 1px solid #00ff00; color:#00ff00;">حذف</a>
                </div>
            {% endif %}
            {% if form.image1.errors %}
                <div class="text-danger">{{ form.image1.errors }}</div>
            {% endif %}
        </div>

        <!-- Image 2 -->
        <div class="form-group">
            <label for="{{ form.image2.id_for_label }}">تصویر 2:</label>
            {{ form.image2 }}
            {% if is_edit and post.images.all.1 %}
                <div class="mt-2">
                    <p>تصویر فعلی:</p>
                    <img src="{{ post.images.all.1.image_file.url }}" alt="تصویر فعلی 2" style="max-width: 200px;">
                    <a href="{% url 'blog:delete-image' post.images.all.1.id %}" class="cta-button" style="background: transparent; border: 1px solid #00ff00; color:#00ff00;">حذف</a>
                </div>
            {% endif %}
            {% if form.image2.errors %}
                <div class="text-danger">{{ form.image2.errors }}</div>
            {% endif %}
        </div>

        <button type="submit" class="cta-button">ذخیره</button>
    </form>
</div>
{% endblock %}
